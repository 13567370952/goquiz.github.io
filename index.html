<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Go语言经典笔试题</title>
    <meta content="Go, Golang, Quiz, Go语言, 笔试题" name=description> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/style.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/bs.js"></script>
    <script src="/assets/script.js"></script>
</head>

<body>
    <div class="bs-docs-header" id="content" tabindex="-1">
        <div class="container">
            <h1>Go语言经典笔试题</h1>
            <a class="github-button" href="https://github.com/goquiz/goquiz.github.io" data-icon="octicon-star" data-show-count="true" aria-label="Star goquiz/goquiz.github.io on GitHub">Star</a>
            <a class="github-button" href="https://github.com/huazhihao/goquiz.github.io/issues" data-icon="octicon-issue-opened" data-show-count="true" aria-label="Issue huazhihao/goquiz.github.io on GitHub">Issue</a>
            <a class="github-button" href="https://github.com/huazhihao" data-show-count="true" aria-label="Follow @huazhihao on GitHub">Follow @huazhihao</a>
        </div>
    </div>
    <div class="container bs-docs-container">
        <div class=row>
            <div class=col-md-9 role=main>
                <div class=bs-docs-section>
                    <h1 class=page-header id=lang-spec>语言规范</h1>
                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/subslice-grow" target="_blank">报错</a>
                    <h2 id=subslice-grow>subslice引用</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
)

func main() {
	s := []int{1, 2, 3}
	ss := s[1:]
	for i := range ss {
		ss[i] &#43;= 10
	}
	fmt.Println(s)
	ss = append(ss, 4)
	for i := range ss {
		ss[i] &#43;= 10
	}
	fmt.Println(s)
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/short-declairation" target="_blank">报错</a>
                    <h2 id=short-declairation>短声明</h2>

                    <div class=bs-example>
                        在局部变量x已申明，y未声明的情况下,以下哪些写法是正确的
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
x, _ := f()
x, _ = f()
x, y := f()
x, y = f()
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
x, _ := f() //incorrect
x, _ = f() //correct
x, y := f() //correct
x, y = f() //incorrect
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/interface-nil" target="_blank">报错</a>
                    <h2 id=interface-nil>interface是否等于nil的判断</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果,并解释为什么 println(InitType() == nil) 有语法错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

type S struct{}

func (s S) F() {}

type IF interface {
	F()
}

func InitType() S {
	var s S
	return s
}

func InitPointer() *S {
	var s *S
	return s
}
func InitEfaceType() interface{} {
	var s S
	return s
}

func InitEfacePointer() interface{} {
	var s *S
	return s
}

func InitIfaceType() IF {
	var s S
	return s
}

func InitIfacePointer() IF {
	var s *S
	return s
}

func main() {
	//println(InitType() == nil)
	println(InitPointer() == nil)
	println(InitEfaceType() == nil)
	println(InitEfacePointer() == nil)
	println(InitIfaceType() == nil)
	println(InitIfacePointer() == nil)
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/map-ok-idiom" target="_blank">报错</a>
                    <h2 id=map-ok-idiom>map存取数据</h2>

                    <div class=bs-example>
                        在以下AB两行修改代码，用正确的用法存取map数据
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

func main() {
	var m map[string]int //A
	m[&#34;a&#34;] = 1
	if v := m[&#34;b&#34;]; v != nil { //B
		println(v)
	}
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

func main() {
	m := make(map[string]int)
	m[&#34;a&#34;] = 1
	if v, ok := m[&#34;b&#34;]; ok {
		println(v)
	}
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/pointer" target="_blank">报错</a>
                    <h2 id=pointer>指针基本操作</h2>

                    <div class=bs-example>
                        在以下AB两行补全代码，使运行结果打印&#34;foo&#34;
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

type S struct {
	m string
}

func f() *S {
	return __ //A
}

func main() {
	p := __    //B
	print(p.m) //print &#34;foo&#34;
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

type S struct {
    m string
}

func f() *S {
    return &amp;S{&#34;foo&#34;} //A
}

func main() {
    p := *f()  //B
    print(p.m) //print &#34;foo&#34;
}
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/empty-interface" target="_blank">报错</a>
                    <h2 id=empty-interface>interface{}万能指针</h2>

                    <div class=bs-example>
                        在以下ABCD四行里，哪几行有语法错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

type S struct {
}

func f(x interface{}) {
}

func g(x *interface{}) {
}

func main() {
	s := S{}
	p := &amp;s
	f(s) //A
	g(s) //B
	f(p) //C
	g(p) //D
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

type S struct {
}

func f(x interface{}) {
}

func g(x *interface{}) {
}

func main() {
    s := S{}
    p := &amp;s
    f(s) //A correct
    g(s) //B incorrect
    f(p) //C correct
    g(p) //D incorrect
}
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/for-pointer" target="_blank">报错</a>
                    <h2 id=for-pointer>for指针</h2>

                    <div class=bs-example>
                        解释为何以下代码打印map的值都为3，并在A行附近修改代码，使打印结果为012的序列
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

const N = 3

func main() {
	m := make(map[int]*int)

	for i := 0; i &lt; N; i&#43;&#43; {
		m[i] = &amp;i //A
	}

	for _, v := range m {
		print(*v)
	}
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

const N = 3

func main() {
	m := make(map[int]*int)

	for i := 0; i &lt; N; i&#43;&#43; {
		j := int(i)
		m[i] = &amp;j
	}

	for _, v := range m {
		print(*v)
	}
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/label-break" target="_blank">报错</a>
                    <h2 id=label-break>break外层循环</h2>

                    <div class=bs-example>
                        修改以下代码，使程序只打印0,0后就break到最外层的for
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

func main() {
	for i := 0; i &lt; 3; i&#43;&#43; {
		for j := 0; j &lt; 3; j&#43;&#43; {
			print(i, &#34;,&#34;, j, &#34; &#34;)
			break
		}
		println()
	}
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

func main() {
outer:
	for i := 0; i &lt; 3; i&#43;&#43; {
		for j := 0; j &lt; 3; j&#43;&#43; {
			print(i, &#34;,&#34;, j, &#34; &#34;)
			break outer
		}
		println()
	}
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/global-varible" target="_blank">报错</a>
                    <h2 id=global-varible>全局变量</h2>

                    <div class=bs-example>
                        假设g为全局变量，以下哪些写法是正确的
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
var g
var g G
var g = G{}
g := G{}
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
var g //incorrect
var g G //correct
var g = G{} //correct
g := G{} //incorrect
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/defer-closefile" target="_blank">报错</a>
                    <h2 id=defer-closefile>defer栈</h2>

                    <div class=bs-example>
                        纠正下面代码的一个错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;io/ioutil&#34;
	&#34;os&#34;
)

func main() {
	f, err := os.Open(&#34;file&#34;)
	defer f.Close()
	if err != nil {
		return
	}

	b, err := ioutil.ReadAll(f)
	println(string(b))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;io/ioutil&#34;
	&#34;os&#34;
)

func main() {
	f, err := os.Open(&#34;file&#34;)
	if err != nil {
		return
	}
	defer f.Close()

	b, err := ioutil.ReadAll(f)
	println(string(b))
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/defer-panic" target="_blank">报错</a>
                    <h2 id=defer-panic>panic栈</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

func f1() {
	defer println(&#34;f1-begin&#34;)
	f2()
	defer println(&#34;f1-end&#34;)
}

func f2() {
	defer println(&#34;f2-begin&#34;)
	f3()
	defer println(&#34;f2-end&#34;)
}

func f3() {
	defer println(&#34;f3-begin&#34;)
	panic(0)
	defer println(&#34;f3-end&#34;)
}

func main() {
	f1()
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/defer-recover" target="_blank">报错</a>
                    <h2 id=defer-recover>recover</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果,以下代码的运行后exit code是0还是1
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import &#34;log&#34;

func f() {
	defer func() {
		if r := recover(); r != nil {
			log.Printf(&#34;recover:%#v&#34;, r)
		}
	}()
	panic(1)
	panic(2)
}

func main() {
	f()
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/goroutine-closure" target="_blank">报错</a>
                    <h2 id=goroutine-closure>goroutine闭包</h2>

                    <div class=bs-example>
                        修改以下代码，使打印的map的长度为N=10
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;sync&#34;
)

const N = 10

func main() {
	m := make(map[int]int)

	wg := &amp;sync.WaitGroup{}
	mu := &amp;sync.Mutex{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func() {
			defer wg.Done()
			mu.Lock()
			m[i] = i
			mu.Unlock()
		}()
	}
	wg.Wait()
	println(len(m))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;sync&#34;
)

const N = 10

func main() {
	m := make(map[int]int)

	wg := &amp;sync.WaitGroup{}
	mu := &amp;sync.Mutex{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func(i int) {
			defer wg.Done()
			mu.Lock()
			m[i] = i
			mu.Unlock()
		}(i)
	}
	wg.Wait()
	println(len(m))
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/type-shadowing" target="_blank">报错</a>
                    <h2 id=type-shadowing>receiver函数的覆盖</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
)

type S1 struct{}

func (s1 S1) f() {
	fmt.Println(&#34;S1.f()&#34;)
}
func (s1 S1) g() {
	fmt.Println(&#34;S1.g()&#34;)
}

type S2 struct {
	S1
}

func (s2 S2) f() {
	fmt.Println(&#34;S2.f()&#34;)
}

type I interface {
	f()
}

func printType(i I) {
	fmt.Printf(&#34;%T\n&#34;, i)
	if s1, ok := i.(S1); ok {
		s1.f()
		s1.g()
	}
	if s2, ok := i.(S2); ok {
		s2.f()
		s2.g()
	}
}

func main() {
	printType(S1{})
	printType(S2{})
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/string-bytes" target="_blank">报错</a>
                    <h2 id=string-bytes>string转换为bytes</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

func main() {
	s := &#34;123&#34;
	ps := &amp;s
	b := []byte(*ps)
	pb := &amp;b

	s &#43;= &#34;4&#34;
	*ps &#43;= &#34;5&#34;
	b[1] = &#39;0&#39;

	println(*ps)
	println(string(*pb))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lang-spec/mutex-map" target="_blank">报错</a>
                    <h2 id=mutex-map>map并发操作的临界区</h2>

                    <div class=bs-example>
                        修改以下代码，使避免concurrent map writes错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;math/rand&#34;
	&#34;sync&#34;
)

const N = 10

func main() {
	m := make(map[int]int)

	wg := &amp;sync.WaitGroup{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func() {
			defer wg.Done()
			m[rand.Int()] = rand.Int()
		}()
	}
	wg.Wait()
	println(len(m))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;math/rand&#34;
	&#34;sync&#34;
)

const N = 10

func main() {
	m := make(map[int]int)

	wg := &amp;sync.WaitGroup{}
	mu := &amp;sync.Mutex{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func() {
			defer wg.Done()
			mu.Lock()
			m[rand.Int()] = rand.Int()
			mu.Unlock()
		}()
	}
	wg.Wait()
	println(len(m))
}

                            </code></pre>
                    </figure>
                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=lib-pack>标准库和包</h1>
                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lib-pack/init-import" target="_blank">报错</a>
                    <h2 id=init-import>init函数</h2>

                    <div class=bs-example>
                        有ABC三个包以及以下文件，根据它们的依赖关系写出init函数的调用顺序
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
// A/a1.go
package A
func init() {
    println(&#34;a1&#34;)
}
var A1 = &#34;&#34;

// A/a2.go
package A
func init() {
	println(&#34;a2&#34;)
}
var A2 = &#34;&#34;


// B/b1.go
package B
func init() {
	println(&#34;b1&#34;)
}
var B1 = &#34;&#34;


// B/b2.go
package B
import &#34;github.com/test/A&#34;
func init() {
	println(&#34;b2&#34;)
}
func f() {
	_ = A.A2
}
var B2 = &#34;&#34;


// C/main.go
package main
import (
	&#34;github.com/test/B&#34;
)
func main() {
	_ = B.B2
}

                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
a1
a2
b1
b2
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lib-pack/json-unmarshal" target="_blank">报错</a>
                    <h2 id=json-unmarshal>json反序列化</h2>

                    <div class=bs-example>
                        纠正下面代码的一个错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;encoding/json&#34;
	&#34;fmt&#34;
)

type Result struct {
	status int
}

func main() {
	var data = []byte(`{&#34;status&#34;: 200}`)
	result := &amp;Result{}

	if err := json.Unmarshal(data, result); err != nil {
		fmt.Println(&#34;error:&#34;, err)
		return
	}

	fmt.Printf(&#34;result=%&#43;v&#34;, result)
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;encoding/json&#34;
	&#34;fmt&#34;
)

type Result struct {
	Status int `json:&#34;status&#34;`
}

func main() {
	var data = []byte(`{&#34;status&#34;: 200}`)
	result := &amp;Result{}

	if err := json.Unmarshal(data, result); err != nil {
		fmt.Println(&#34;error:&#34;, err)
		return
	}

	fmt.Printf(&#34;result=%&#43;v&#34;, result)
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lib-pack/sync-map" target="_blank">报错</a>
                    <h2 id=sync-map>map并发存取</h2>

                    <div class=bs-example>
                        修改以下代码AB两行，使变量m可以在goroutine里存取数据，并不会导致concurrent map writes错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;sync&#34;
)

const N = 100

func main() {
	m := &amp;map[int]int{} //A
	wg := &amp;sync.WaitGroup{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func(i int) {
			(*m)[i] = i //B
			wg.Done()
		}(i)
	}
	wg.Wait()
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;sync&#34;
)

const N = 100

func main() {
	m := &amp;sync.Map{}
	wg := &amp;sync.WaitGroup{}
	wg.Add(N)
	for i := 0; i &lt; N; i&#43;&#43; {
		go func(i int) {
			m.Store(i, i)
			wg.Done()
		}(i)
	}
	wg.Wait()
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/lib-pack/utf8-len" target="_blank">报错</a>
                    <h2 id=utf8-len>utf8字符串长度</h2>

                    <div class=bs-example>
                        修改下面代码以显示正确的utf8字符长度
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
)

func main() {
	fmt.Println(len(&#34;你好&#34;))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;fmt&#34;
	&#34;unicode/utf8&#34;
)

func main() {
	fmt.Println(utf8.RuneCountInString(&#34;你好&#34;))
}

                            </code></pre>
                    </figure>
                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=toolchain>工具链</h1>
                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/toolchain/gcflags" target="_blank">报错</a>
                    <h2 id=gcflags>gcflags参数</h2>

                    <div class=bs-example>
                        解释以下几个gcflags参数的意义
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
-l:
-m:
-N:
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
-l:禁止函数inline
-m:显示对象内存从栈向堆的escape分析，以及是否inline的选择
-N:禁止优化
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/toolchain/benchmark-N" target="_blank">报错</a>
                    <h2 id=benchmark-N>benchmark次数变量</h2>

                    <div class=bs-example>
                        以下代码中b.N是如何调整的
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
func BenchmarkFib10(b *testing.B) {
	for n := 0; n &lt; b.N; n&#43;&#43; {
		Fib(10)
	}
}
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
系统以一定倍数的算法自动增大b.N直到benchmark函数运行时间稳定
                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/toolchain/govendor-gopath" target="_blank">报错</a>
                    <h2 id=govendor-gopath>govendor路径覆盖</h2>

                    <div class=bs-example>
                        govendor是如何实现对GOPATH的覆盖的
                    </div>

                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
govendor使用了vendor目录对GOPATH覆盖，vendor目录是Go 1.6开始引入的一个特性，用来引入独立的包路径以不污染GOPATH和GOROOT
                            </code></pre>
                    </figure>
                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=internals>内部原理</h1>
                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/internals/unsafe-bytes-string" target="_blank">报错</a>
                    <h2 id=unsafe-bytes-string>string内部结构</h2>

                    <div class=bs-example>
                        在以下A行补全代码,将变量b从[]byte类型转化成string类型并且不产生内存拷贝，并使运行结果打印&#34;143&#34;
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
	&#34;unsafe&#34;
)

func main() {
	var b = []byte(&#34;123&#34;)
	s := __ //A

	b[1] = &#39;4&#39;
	fmt.Printf(&#34;%&#43;v\n&#34;, s) //print 143
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;fmt&#34;
	&#34;unsafe&#34;
)

func main() {
	var b = []byte(&#34;123&#34;)
	s := *(*string)(unsafe.Pointer(&amp;b))

	b[1] = &#39;4&#39;
	fmt.Printf(&#34;%&#43;v\n&#34;, s) //print 143
}

                            </code></pre>
                    </figure>
                    

                    
                    <a class="pull-right gq-report-error" href="https://github.com/goquiz/goquiz.github.io/tree/master/_build/directory/internals/unsafe-slice-array" target="_blank">报错</a>
                    <h2 id=unsafe-slice-array>slice内部结构</h2>

                    <div class=bs-example>
                        在以下A行补全代码，使printOriginalSlice打印参数subslice的原始slice的值(提示:长度为M = 10)
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
	&#34;reflect&#34;
	&#34;unsafe&#34;
)

const M = 10
const N = 5

func printOriginalSlice(subslice *[]int) {
	data := __ //A

	fmt.Printf(&#34;original\t%p:%&#43;v\n&#34;, data, *data)
}

func main() {
	slice := make([]int, M)
	for i, _ := range slice {
		slice[i] = i
	}
	subslice := slice[0:N]

	fmt.Printf(&#34;slice\t%p:%&#43;v\n&#34;, &amp;slice, slice)
	fmt.Printf(&#34;subslice\t%p:%&#43;v\n&#34;, &amp;subslice, subslice)
	printOriginalSlice(&amp;subslice)
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;fmt&#34;
	&#34;reflect&#34;
	&#34;unsafe&#34;
)

const M = 10
const N = 5

func printOriginalSlice(subslice *[]int) {
	data := (*[M]int)(unsafe.Pointer(((*reflect.SliceHeader)(unsafe.Pointer(subslice))).Data))

	fmt.Printf(&#34;original\t%p:%&#43;v\n&#34;, data, *data)
}

func main() {
	slice := make([]int, M)
	for i, _ := range slice {
		slice[i] = i
	}
	subslice := slice[0:N]

	fmt.Printf(&#34;slice\t%p:%&#43;v\n&#34;, &amp;slice, slice)
	fmt.Printf(&#34;subslice\t%p:%&#43;v\n&#34;, &amp;subslice, subslice)
	printOriginalSlice(&amp;subslice)
}

                            </code></pre>
                    </figure>
                    

                    
                </div>
            </div>

            <div class=col-md-3 role=complementary>
                <nav class="bs-docs-sidebar hidden-print hidden-sm hidden-xs">
                    <ul class="nav bs-docs-sidenav">
                        <li>
                            <a href=#lang-spec>语言规范</a>
                            <ul class=nav>
                                <li>
                                    <a href=#subslice-grow>subslice引用</a>
                                </li><li>
                                    <a href=#short-declairation>短声明</a>
                                </li><li>
                                    <a href=#interface-nil>interface是否等于nil的判断</a>
                                </li><li>
                                    <a href=#map-ok-idiom>map存取数据</a>
                                </li><li>
                                    <a href=#pointer>指针基本操作</a>
                                </li><li>
                                    <a href=#empty-interface>interface{}万能指针</a>
                                </li><li>
                                    <a href=#for-pointer>for指针</a>
                                </li><li>
                                    <a href=#label-break>break外层循环</a>
                                </li><li>
                                    <a href=#global-varible>全局变量</a>
                                </li><li>
                                    <a href=#defer-closefile>defer栈</a>
                                </li><li>
                                    <a href=#defer-panic>panic栈</a>
                                </li><li>
                                    <a href=#defer-recover>recover</a>
                                </li><li>
                                    <a href=#goroutine-closure>goroutine闭包</a>
                                </li><li>
                                    <a href=#type-shadowing>receiver函数的覆盖</a>
                                </li><li>
                                    <a href=#string-bytes>string转换为bytes</a>
                                </li><li>
                                    <a href=#mutex-map>map并发操作的临界区</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#lib-pack>标准库和包</a>
                            <ul class=nav>
                                <li>
                                    <a href=#init-import>init函数</a>
                                </li><li>
                                    <a href=#json-unmarshal>json反序列化</a>
                                </li><li>
                                    <a href=#sync-map>map并发存取</a>
                                </li><li>
                                    <a href=#utf8-len>utf8字符串长度</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#toolchain>工具链</a>
                            <ul class=nav>
                                <li>
                                    <a href=#gcflags>gcflags参数</a>
                                </li><li>
                                    <a href=#benchmark-N>benchmark次数变量</a>
                                </li><li>
                                    <a href=#govendor-gopath>govendor路径覆盖</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#internals>内部原理</a>
                            <ul class=nav>
                                <li>
                                    <a href=#unsafe-bytes-string>string内部结构</a>
                                </li><li>
                                    <a href=#unsafe-slice-array>slice内部结构</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <a href=#top class=back-to-top> Back to top </a>
                </nav>
            </div>
            
        </div>
    </div>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12643045-7"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-12643045-7');
    </script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
