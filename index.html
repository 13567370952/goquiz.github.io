<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Go语言经典笔试题</title>
    <meta content="Go, Golang, Quiz, Go语言, 笔试题" name=description> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/style.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/bs.js"></script>
    <script src="/assets/script.js"></script>
</head>

<body>
    <div class="bs-docs-header" id="content" tabindex="-1">
        <div class="container">

            <a class="header-logo-invertocat" href="https://github.com/goquiz/goquiz.github.io" data-hotkey="g d" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <h1>Go语言经典笔试题
                    <svg aria-hidden="true" class="octicon octicon-mark-github" height="40" version="1.1" viewBox="0 0 16 16" width="40">
                        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                </h1>
            </a>
        </div>
    </div>
    <div class="container bs-docs-container">
        <div class=row>
            <div class=col-md-9 role=main>
                <div class=bs-docs-section>
                    <h1 class=page-header id=lang-spec>语言规范</h1>
                    
                    <h2 id=pointer>指针</h2>

                    <div class=bs-example>
                        在以下AB两行补全代码，使运行结果打印&#34;foo&#34;
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

type S struct {
	m string
}

func f() *S {
	return __ //A
}

func main() {
	p := __    //B
	print(p.m) //print &#34;foo&#34;
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

type S struct {
    m string
}

func f() *S {
    return &amp;S{&#34;foo&#34;} //A
}

func main() {
    p := *f()  //B
    print(p.m) //print &#34;foo&#34;
}
                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=empty-interface>interface{}万能指针</h2>

                    <div class=bs-example>
                        在以下ABCD四行里，哪几行有语法错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

type S struct {
}

func f(x interface{}) {
}

func g(x *interface{}) {
}

func main() {
	s := S{}
	p := &amp;s
	f(s) //A
	g(s) //B
	f(p) //C
	g(p) //D
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

type S struct {
}

func f(x interface{}) {
}

func g(x *interface{}) {
}

func main() {
    s := S{}
    p := &amp;s
    f(s) //A correct
    g(s) //B incorrect
    f(p) //C correct
    g(p) //D incorrect
}
                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=defer-closefile>defer</h2>

                    <div class=bs-example>
                        纠正下面代码的一个错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;io/ioutil&#34;
	&#34;os&#34;
)

func main() {
	f, err := os.Open(&#34;file&#34;)
	defer f.Close()
	if err != nil {
		return
	}

	b, err := ioutil.ReadAll(f)
	println(string(b))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;io/ioutil&#34;
	&#34;os&#34;
)

func main() {
	f, err := os.Open(&#34;file&#34;)
	if err != nil {
		return
	}
	defer f.Close()

	b, err := ioutil.ReadAll(f)
	println(string(b))
}

                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=short-declairation>短声明</h2>

                    <div class=bs-example>
                        在局部变量x已申明，y未声明的情况下,以下哪些写法是正确的
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
x, _ := f()
x, _ = f()
x, y := f()
x, y = f()
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
x, _ := f() //incorrect
x, _ = f() //correct
x, y := f() //correct
x, y = f() //incorrect
                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=global-varible>全局变量</h2>

                    <div class=bs-example>
                        假设g为全局变量，以下哪些写法是正确的
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
var g
var g G
var g = G{}
g := G{}
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
var g //incorrect
var g G //correct
var g = G{} //correct
g := G{} //incorrect
                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=string-bytes>字符串</h2>

                    <div class=bs-example>
                        以下代码会打印什么结果
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

func main() {
	s := &#34;123&#34;
	ps := &amp;s
	b := []byte(*ps)
	pb := &amp;b

	s &#43;= &#34;4&#34;
	*ps &#43;= &#34;5&#34;
	b[1] = &#39;0&#39;

	println(*ps)
	println(string(*pb))
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=lib-pack>标准库和包</h1>
                    
                    <h2 id=init-import>init函数</h2>

                    <div class=bs-example>
                        有ABC三个包以及以下文件，根据它们的依赖关系写出init函数的调用顺序
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
// A/a1.go
package A
func init() {
    println(&#34;a1&#34;)
}
var A1 = &#34;&#34;

// A/a2.go
package A
func init() {
	println(&#34;a2&#34;)
}
var A2 = &#34;&#34;


// B/b1.go
package B
func init() {
	println(&#34;b1&#34;)
}
var B1 = &#34;&#34;


// B/b2.go
package B
import &#34;github.com/test/A&#34;
func init() {
	println(&#34;b2&#34;)
}
func f() {
	_ = A.A2
}
var B2 = &#34;&#34;


// C/main.go
package main
import (
	&#34;github.com/test/B&#34;
)
func main() {
	_ = B.B2
}

                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
a1
a2
b1
b2
                            </code></pre>
                    </figure>
                    

                    
                    <h2 id=json-unmarshal>json反序列化</h2>

                    <div class=bs-example>
                        纠正下面代码的一个错误
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;encoding/json&#34;
	&#34;fmt&#34;
)

type Result struct {
	status int
}

func main() {
	var data = []byte(`{&#34;status&#34;: 200}`)
	result := &amp;Result{}

	if err := json.Unmarshal(data, result); err != nil {
		fmt.Println(&#34;error:&#34;, err)
		return
	}

	fmt.Printf(&#34;result=%&#43;v&#34;, result)
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;encoding/json&#34;
	&#34;fmt&#34;
)

type Result struct {
	Status int `json:&#34;status&#34;`
}

func main() {
	var data = []byte(`{&#34;status&#34;: 200}`)
	result := &amp;Result{}

	if err := json.Unmarshal(data, result); err != nil {
		fmt.Println(&#34;error:&#34;, err)
		return
	}

	fmt.Printf(&#34;result=%&#43;v&#34;, result)
}

                            </code></pre>
                    </figure>
                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=toolchain>工具链</h1>
                    
                    <h2 id=gcflags>gcflags参数</h2>

                    <div class=bs-example>
                        解释以下几个gcflags参数的意义
                    </div>

                    

                    
                    <figure class=highlight>
                        <pre><code class=language-html data-lang=go>
-l:
-m:
-N:
                        </code></pre>
                    </figure>
                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
-l:禁止函数inline
-m:显示对象内存从栈向堆的escape分析，以及是否inline的选择
-N:禁止优化
                            </code></pre>
                    </figure>
                    

                    
                </div><div class=bs-docs-section>
                    <h1 class=page-header id=internals>内部原理</h1>
                    
                    <h2 id=unsafe-bytes-string>unsafe转换</h2>

                    <div class=bs-example>
                        在以下A行补全代码,将变量b从[]byte类型转化成string类型并且不产生内存拷贝，并使运行结果打印&#34;143&#34;
                    </div>

                    
                    <figure class="highlight editable">
                        <textarea rows="15">
package main

import (
	&#34;fmt&#34;
	&#34;unsafe&#34;
)

func main() {
	var b = []byte(&#34;123&#34;)
	s := __ //A

	b[1] = &#39;4&#39;
	fmt.Printf(&#34;%&#43;v\n&#34;, s) //print 143
}

                        </textarea>
                    </figure>
                    <button type="button" class="btn btn-primary gq-run-btn">运行代码</button>
                    

                    

                    
                    <button type="button" class="btn btn-info gq-anwser-btn">显示答案</button>
                    <figure class="highlight gq-anwser">
                        <pre><code class=language-html data-lang=go>
package main

import (
	&#34;fmt&#34;
	&#34;unsafe&#34;
)

func main() {
	var b = []byte(&#34;123&#34;)
	s := *(*string)(unsafe.Pointer(&amp;b))

	b[1] = &#39;4&#39;
	fmt.Printf(&#34;%&#43;v\n&#34;, s) //print 143
}

                            </code></pre>
                    </figure>
                    

                    
                </div>
            </div>

            <div class=col-md-3 role=complementary>
                <nav class="bs-docs-sidebar hidden-print hidden-sm hidden-xs">
                    <ul class="nav bs-docs-sidenav">
                        <li>
                            <a href=#lang-spec>语言规范</a>
                            <ul class=nav>
                                <li>
                                    <a href=#pointer>指针</a>
                                </li><li>
                                    <a href=#empty-interface>interface{}万能指针</a>
                                </li><li>
                                    <a href=#defer-closefile>defer</a>
                                </li><li>
                                    <a href=#short-declairation>短声明</a>
                                </li><li>
                                    <a href=#global-varible>全局变量</a>
                                </li><li>
                                    <a href=#string-bytes>字符串</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#lib-pack>标准库和包</a>
                            <ul class=nav>
                                <li>
                                    <a href=#init-import>init函数</a>
                                </li><li>
                                    <a href=#json-unmarshal>json反序列化</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#toolchain>工具链</a>
                            <ul class=nav>
                                <li>
                                    <a href=#gcflags>gcflags参数</a>
                                </li>
                            </ul>
                        </li><li>
                            <a href=#internals>内部原理</a>
                            <ul class=nav>
                                <li>
                                    <a href=#unsafe-bytes-string>unsafe转换</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <a href=#top class=back-to-top> Back to top </a>
                </nav>
            </div>
            
        </div>
    </div>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12643045-7"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-12643045-7');
    </script>

</body>